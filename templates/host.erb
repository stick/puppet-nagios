define host {
    use                         <%= nagios_template %>
    host_name                   <%= name %>
    address                     <%= name %>
<% unless host_groups.empty? -%>
    hostgroups                  <%= host_groups %>
<% end -%>
    alias                       <%= nagios_alias %>
    contact_groups              <%= contact_groups %> 
<% unless parents.empty? -%>
    parents                     <%= parents %>
<% end -%>
}
<% unless escalation_contacts.empty? -%>
<% for stage in escalation_stages -%>
define hostescalation {
    host_name                   <%= name %>
    first_notification          <%= stage %>
    last_notification           0
    notification_interval       5
<% contacts << escalation_contacts.shift -%>
    contact_groups              <%= contacts.join(",") %>
}
<% end -%>
<% end -%>
