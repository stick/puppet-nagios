define host {
    use                         <%= nagios_template %>
    host_name                   <%= name %>
    address                     <%= name %>
<% unless host_groups.empty? -%>
    hostgroups                  <%= host_groups %>
<% end -%>
    alias                       <%= nagios_alias %>
    contact_groups              <%= contact_groups %> 
<% unless parents.empty? -%>
    parents                     <%= parents %>
<% end -%>
}
<% unless escalation_groups.empty? -%>
<% for stage in escalation_stages -%>
define hostescalation {
    host_name                   <%= name %>
    first_notification          <%= stage %>
    last_notification           0
    notification_interval       5
<% contacts << escalation_groups.shift -%>
    contact_groups              <%= contacts.join(",") %>
}
<% end -%>
<% end -%>
<% if $dummy_service == true -%>
define service {
    use                         <%= nagios_template %>
    service_description         OK
    host_name                   <%= name %>
    contact_groups              <%= contact_groups %>
    check_command               check_ok
    max_check_attemtps          0
} 
<% end -%>
